# CRAY XC50 w. Marvell ThunderX2 ARM v8.1 CPU
# Isambard Phase-2 https://gw4-isambard.github.io/docs/index.html
# under the (default) cray programming environment
# module module load cray-fftw cray-hdf5-parallel craype-arm-thunderx2

###############################################
#CRAY compiler with CRAY wrappers
###############################################
MPIFC = ftn
FFLAGS = -e F -O3 -dynamic 
CC = cc 
CFLAGS = -O3

RPATH=-Wl,-rpath
PPPRE=-Wp,
PPSEP=,

################################################
##BLAS, LAPACK from Cray libsci
################################################
LIBLA = -L$(CRAY_LIBSCI_PREFIX_DIR)/lib -lsci_cray $(RPATH)=$(CRAY_LIBSCI_PREFIX_DIR)/lib
#DEFINES +=

################################################
##FFTs from FFTW3
################################################
LIBFFT = -L$(FFTW_DIR) -lfftw3 -lm $(RPATH)=$(FFTW_DIR)
INCFFT = $(FFTW_INC)

###############################################
#MPI-parallel HDF5
###############################################
ifneq ($(HDF5IO),no)
	LIBHDF5 = -L$(HDF5_DIR)/lib -lhdf5_fortran -lhdf5 -lz $(RPATH)=$(HDF5_DIR)/lib
	INCLUDES = -I$(HDF5_DIR)/include
endif
